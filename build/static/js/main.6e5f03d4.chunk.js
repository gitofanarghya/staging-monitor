(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{305:function(e,t,n){e.exports=n(462)},461:function(e,t,n){},462:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(28),c=n(19),o=n(292),l=n(550),s=n(101),u=n(277),m=n(13),d=JSON.parse(localStorage.getItem("user"))?{currentPage:"Dashboard",loggedIn:!0,loggingIn:!1,message:"",tokens:JSON.parse(localStorage.getItem("user")),communities:[],units:[],devices:[],zones:[],events:[],selectedCommunity:"",selectedUnit:"",selectedZone:"",selectedDevice:"",graphEvents:[]}:{currentPage:"Dashboard",loggedIn:!1,loggingIn:!1,message:"",tokens:{},communities:[],units:[],devices:[],zones:[],events:[],selectedCommunity:"",selectedUnit:"",selectedZone:"",selectedDevice:"",graphEvents:[],fetchingGraphEvents:!1};var p=Object(s.c)({app:function(e,t){if("undefined"===typeof e)return d;switch(t.type){case"get_graph_events_request":return Object(m.a)({},e,{fetchingGraphEvents:!0});case"get_graph_events_success":return Object(m.a)({},e,{graphEvents:t.json,fetchingGraphEvents:!1});case"get_graph_events_failure":return Object(m.a)({},e,{fetchingGraphEvents:!1});case"set_device":return Object(m.a)({},e,{selectedDevice:t.id});case"set_zone":return Object(m.a)({},e,{selectedZone:t.id,selectedDevice:""});case"set_unit":return Object(m.a)({},e,{selectedUnit:t.id,currentPage:"Unit",selectedZone:"",selectedDevice:"",zones:[],devices:[],graphEvents:[]});case"set_community":return Object(m.a)({},e,{selectedCommunity:t.id,currentPage:"Dashboard"===e.currentPage?"Community":e.currentPage,selectedDevice:"",selectedUnit:"",selectedZone:"",devices:[],zones:[],units:[]});case"change_page":return Object(m.a)({},e,{currentPage:t.page});case"get_active_events_request":return Object(m.a)({},e);case"get_active_events_success":return Object(m.a)({},e,{events:t.json});case"get_active_events_failure":case"get_zones_request":return Object(m.a)({},e);case"get_zones_success":return Object(m.a)({},e,{zones:t.json,selectedZone:t.json[0].id});case"get_zones_failure":case"get_devices_request":return Object(m.a)({},e);case"get_devices_success":return Object(m.a)({},e,{devices:t.json});case"get_devices_failure":case"get_units_request":return Object(m.a)({},e);case"get_units_success":return Object(m.a)({},e,{units:t.json});case"get_units_failure":return Object(m.a)({},e);case"refreshed":return Object(m.a)({},e,{tokens:t.data});case"get_communities_request":return Object(m.a)({},e);case"get_communities_success":return Object(m.a)({},e,{communities:t.json.map(function(e){return Object(m.a)({},e,{name:e.id})})});case"get_communities_failure":return Object(m.a)({},e);case"login_request":return Object(m.a)({},e,{loggingIn:!0});case"login_success":return Object(m.a)({},e,{loggedIn:!0,loggingIn:!1,tokens:t.json});case"login_failure":return Object(m.a)({},e,{loggingIn:!1,message:t.error});case"logout":return{currentPage:"Dashboard",loggedIn:!1,loggingIn:!1,message:"",tokens:{},communities:[],units:[],devices:[],zones:[],events:[],selectedCommunity:"",selectedUnit:"",selectedZone:"",selectedDevice:""};default:return e}}}),f=Object(u.createLogger)(),h=Object(s.d)(p,Object(s.a)(f)),g=n(16),y=n(15),v=n(22),E=n(21),b=n(23),O=n(29),_=n(544),j=n(525),C=n(519),k=n(520),w=n(10),S=function(){return r.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#424242",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("svg",{width:100,height:100,version:"1.1",id:"L2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},r.a.createElement("circle",{fill:"none",stroke:"#fff",strokeWidth:"4",strokeMiterlimit:"10",cx:"50",cy:"50",r:"48"}),r.a.createElement("line",{fill:"none",strokeLinecap:"round",stroke:"#fff",strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"85",y2:"50.5"},r.a.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),r.a.createElement("line",{fill:"none",strokeLinecap:"round",stroke:"#fff",strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"49.5",y2:"74"},r.a.createElement("animateTransform",{attributeName:"transform",dur:"15s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"}))))},D=n(518),x={login:function(e,t){var n={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({grant_type:"password",email:e,password:t,client_id:"rTZ61c51XXJriPBSoGReIeZ7W7MjWy"})};return fetch("https://care-api-prod.appspot.com/oauth2/tokens",n).then(B)},getCommunities:function(){var e={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://care-api-prod.appspot.com/communities?get_all=1",e).then(B)},getUnits:function(e){var t={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://care-api-prod.appspot.com/units?community_id=".concat(e),t).then(B)},getDevices:function(e){var t={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://dm-dot-care-api-prod.appspot.com/sites/".concat(e,"/devices"),t).then(B)},getZones:function(e){var t={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://dm-dot-care-api-prod.appspot.com/sites/".concat(e,"/zones"),t).then(B)},getActiveEvents:function(){var e={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://care-api-prod.appspot.com/events?get_all=1&status=unassigned,assigned",e).then(B)},getGraphEvents:function(e){var t={method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:T(),body:null};return fetch("https://activity-dot-care-api-prod.appspot.com/browse/site_data?site_id=".concat(e),t).then(B)}};function T(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.access_token?{"Content-Type":"application/json",authorization:"Bearer ".concat(e.access_token)}:{}}function B(e){return e.json().then(function(t){if(!e.ok){var n=JSON.stringify(t.error&&t.error.message||e.statusText);return Promise.reject(n)}return t})}var N=n(514),z=n(517),A=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(O.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;a&&r&&("staging_monitor"===a&&"gargoyle$"===r?n.props.login("av_support@stack.care","Abcd1234$"):n.props.loginFailure())},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loggingIn,n=e.classes;return t?r.a.createElement(S,null):r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(N.a,{className:n.AppBar,position:"static",color:"primary"},r.a.createElement(z.a,{disableGutters:!0},r.a.createElement(D.a,{container:!0,justify:"space-between",alignItems:"center",style:{height:"64px"}}))),r.a.createElement(D.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{height:"calc(100% - 64px)"}},r.a.createElement(D.a,{md:3,sm:6,xs:10,item:!0},r.a.createElement(C.a,{className:n.card},r.a.createElement(k.a,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(_.a,{name:"username",label:"Email Id",placeholder:"Enter your email id",className:"email-field",margin:"normal",onChange:this.handleChange,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(_.a,{name:"password",label:"Password",className:"password-field",placeholder:"Enter your password",type:"password",autoComplete:"current-password",margin:"normal",onChange:this.handleChange,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(j.a,{type:"submit",className:"submit-button"},"Login"))))))))}}]),t}(r.a.Component);var L=Object(c.b)(function(e){return{loggingIn:e.app.loggingIn}},function(e){return{login:function(t,n){e({type:"login_request"}),x.login(t,n).then(function(t){localStorage.setItem("user",JSON.stringify(t)),e({type:"login_success",json:t})},function(t){e({type:"login_failure",error:t})})},loginFailure:function(){e({type:"login_failure",error:"invalid credentials"})}}})(Object(w.a)(function(e){var t,n;return{AppBar:{backgroundColor:"#525963"},card:{maxHeight:450},media:{paddingTop:"213.64px",backgroundSize:"contain"},bigLogo:Object(O.a)({height:"100%"},e.breakpoints.down(960),{display:"none"}),smallLogo:(t={height:"100%"},Object(O.a)(t,e.breakpoints.up(960),{display:"none"}),Object(O.a)(t,e.breakpoints.down(410),{display:"none"}),t),smallerLogo:Object(O.a)({height:"100%"},e.breakpoints.up(410),{display:"none"}),bigHeading:Object(O.a)({textAlign:"center"},e.breakpoints.down(960),{display:"none"}),smallHeading:(n={textAlign:"center"},Object(O.a)(n,e.breakpoints.up(960),{display:"none"}),Object(O.a)(n,e.breakpoints.down(410),{display:"none"}),n),smallerHeading:Object(O.a)({textAlign:"center"},e.breakpoints.up(410),{display:"none"}),mainPic:Object(O.a)({height:450},e.breakpoints.down("sm"),{display:"none"})}})(A)),P=n(547),F=n(533),I=n(291),R=n.n(I),W=n(548),U=n(551),Z=n(545),G=n(524),H=n(469),J=n(528),q=n(282),M=n.n(q),X=n(278),Y=n.n(X),V=n(279),$=n.n(V),K=n(280),Q=n.n(K),ee=n(281),te=n.n(ee),ne=n(125),ae=n(527),re=n(529),ie=n(531),ce=n(532),oe=n(530),le=n(526),se=n(522),ue=n(546),me=n(472),de=Object(w.a)(function(e){return{input:{fontWeight:500,color:"white",fontSize:"22px"}}})(me.a),pe=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={community:""===n.props.selectedCommunity?"Please select a community":n.props.communities.filter(function(e){return e.id===n.props.selectedCommunity})[0].name},n.handleChange=function(e){n.props.setCommunity(n.props.communities.filter(function(t){return t.name===e.target.value})[0].id),n.setState({community:e.target.value})},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.communities;return r.a.createElement("form",{className:t.root,autoComplete:"off"},r.a.createElement(se.a,{variant:"standard",className:t.formControl},r.a.createElement(ue.a,{disabled:n.length<2,value:this.state.community,onChange:this.handleChange,input:r.a.createElement(de,{name:"community",id:"select-community"}),classes:n.length>1?{icon:t.icon}:{icon:t.iconDisabled}},r.a.createElement(le.a,{key:"Please select a community",value:"Please select a community"},"Please select a community"),n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(e){return r.a.createElement(le.a,{key:e.id,value:e.name},e.name)}))))}}]),t}(r.a.Component);var fe=Object(w.a)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:250},selectEmpty:{marginTop:2*e.spacing.unit},icon:{color:"white",top:"calc(50% - 15px)"},iconDisabled:{display:"none"}}})(Object(c.b)(function(e){var t=e.app;return{communities:t.communities,selectedCommunity:t.selectedCommunity}},function(e){return{setCommunity:function(t){e({type:"set_community",id:t}),e({type:"get_units_request"}),x.getUnits(t).then(function(t){e({type:"get_units_success",json:t})},function(t){e({type:"get_units_failure",error:t})})}}})(pe)),he=Object(w.a)(function(e){return{input:{fontWeight:500,color:"white",fontSize:"22px"}}})(me.a),ge=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={unit:""===n.props.selectedUnit?"Please select a unit":n.props.units.filter(function(e){return e.id===n.props.selectedUnit})[0].name},n.handleChange=function(e){n.props.setUnit(n.props.units.filter(function(t){return t.name===e.target.value})[0].id),n.setState({unit:e.target.value})},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.units;return r.a.createElement("form",{className:t.root,autoComplete:"off"},r.a.createElement(se.a,{variant:"standard",className:t.formControl},r.a.createElement(ue.a,{disabled:n.length<2,value:this.state.unit,onChange:this.handleChange,input:r.a.createElement(he,{name:"unit",id:"select-unit"}),classes:n.length>1?{icon:t.icon}:{icon:t.iconDisabled}},r.a.createElement(le.a,{key:"Please select a unit",value:"Please select a unit",style:{pointerEvents:"none"}},"Please select a unit"),n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(e){return r.a.createElement(le.a,{key:e.id,value:e.name},e.name)}))))}}]),t}(r.a.Component);var ye=Object(w.a)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:250},selectEmpty:{marginTop:2*e.spacing.unit},icon:{color:"white",top:"calc(50% - 15px)"},iconDisabled:{display:"none"}}})(Object(c.b)(function(e){var t=e.app,n=t.units,a=t.selectedCommunity,r=t.selectedUnit;return{units:n.filter(function(e){return e.community_id===a}),selectedUnit:r}},function(e){return{setUnit:function(t){e({type:"set_unit",id:t}),e({type:"get_devices_request"}),x.getDevices(t).then(function(t){e({type:"get_devices_success",json:t})},function(t){e({type:"get_devices_failure",error:t})}),e({type:"get_zones_request"}),x.getZones(t).then(function(t){e({type:"get_zones_success",json:t})},function(t){e({type:"get_zones_failure",error:t})}),e({type:"get_graph_events_request"}),x.getGraphEvents(t).then(function(t){e({type:"get_graph_events_success",json:t})},function(t){e({type:"get_graph_events_failure",error:t})})}}})(ge)),ve=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={mobileOpen:!1,open:!1},n.handleDrawerToggle=function(){n.setState(function(e){return{mobileOpen:!e.mobileOpen}})},n.handleClickOpen=function(){n.setState(Object(m.a)({},n.state,{open:!n.state.open}))},n.logout=function(){n.props.logout()},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme,i=t.children,c=r.a.createElement("div",null,r.a.createElement("div",{className:n.toolbar,style:{backgroundColor:"#525A62"}}),r.a.createElement(G.a,null,r.a.createElement(H.a,{button:!0,onClick:function(){return e.props.changePage("Dashboard")},style:"Dashboard"===this.props.currentPage?{color:"#1ADCFF",fontWeight:500,fontSize:14,backgroundColor:"transparent"}:{fontWeight:500,fontSize:14,backgroundColor:"transparent"}},r.a.createElement(ae.a,{style:{color:"inherit"}},r.a.createElement(Y.a,null)),r.a.createElement(J.a,{disableTypography:!0,primary:"Dashboard"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.props.changePage("Community")},style:"Community"===this.props.currentPage?{color:"#1ADCFF",fontWeight:500,fontSize:14,backgroundColor:"transparent"}:{fontWeight:500,fontSize:14,backgroundColor:"transparent"}},r.a.createElement(ae.a,{style:{color:"inherit"}},r.a.createElement($.a,null)),r.a.createElement(J.a,{disableTypography:!0,primary:"Community"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.props.changePage("Unit")},style:"Unit"===this.props.currentPage?{color:"#1ADCFF",fontWeight:500,fontSize:14,backgroundColor:"transparent"}:{fontWeight:500,fontSize:14,backgroundColor:"transparent"}},r.a.createElement(ae.a,{style:{color:"inherit"}},r.a.createElement(Q.a,null)),r.a.createElement(J.a,{disableTypography:!0,primary:"Unit"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClickOpen()}},r.a.createElement(ae.a,{style:{color:"inherit"}},r.a.createElement(te.a,null)),r.a.createElement(J.a,{disableTypography:!0,style:{color:"inherit",fontWeight:500,fontSize:14},primary:"Logout"})),r.a.createElement(re.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(oe.a,{id:"alert-dialog-title",style:{textAlign:"center"}},"Log out"),r.a.createElement(ie.a,null,r.a.createElement(ce.a,{id:"alert-dialog-description",style:{textAlign:"center"}},"Are you sure you want to log out of your account?")),r.a.createElement(j.a,{variant:"contained",onClick:function(){return e.logout()},style:{margin:"auto",width:"70%",marginBottom:"10px",backgroundColor:"#EC655F",color:"white"}},"Log out"),r.a.createElement(j.a,{variant:"contained",onClick:function(){return e.handleClickOpen()},style:{margin:"auto",width:"70%",marginBottom:"20px",backgroundColor:"#BDC5CB",color:"white"}},"Cancel"))));return r.a.createElement("div",{className:n.root},r.a.createElement(W.a,null),r.a.createElement(N.a,{position:"fixed",color:"primary",className:n.appBar},r.a.createElement(z.a,null,r.a.createElement(F.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:n.menuButton},r.a.createElement(M.a,null)),"Community"===this.props.currentPage&&r.a.createElement(fe,null)||"Unit"===this.props.currentPage&&r.a.createElement("div",null,r.a.createElement(fe,null)," ",r.a.createElement(ye,null))||r.a.createElement(ne.a,{variant:"h5",color:"inherit",noWrap:!0},"Operations Center"))),r.a.createElement("nav",{className:n.drawer},r.a.createElement(Z.a,{lgUp:!0,implementation:"css"},r.a.createElement(U.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:n.drawerPaper}},c)),r.a.createElement(Z.a,{mdDown:!0,implementation:"css"},r.a.createElement(U.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},c))),r.a.createElement("main",{className:n.content},i))}}]),t}(r.a.Component);var Ee=Object(c.b)(function(e){return{currentPage:e.app.currentPage}},function(e){return{changePage:function(t){e({type:"change_page",page:t})},logout:function(){localStorage.removeItem("user"),e({type:"logout"})}}})(Object(w.a)(function(e){return{root:{display:"flex",height:"100%"},drawer:Object(O.a)({},e.breakpoints.up("lg"),{width:250,flexShrink:0}),appBar:Object(O.a)({marginLeft:250,backgroundColor:"#179fec",height:100},e.breakpoints.up("lg"),{width:"calc(100% - ".concat(250,"px)")}),menuButton:Object(O.a)({marginRight:20},e.breakpoints.up("lg"),{display:"none"}),toolbar:Object(m.a)({},e.mixins.toolbar,{height:100}),drawerPaper:{width:250,border:"none"},content:{flexGrow:1,padding:e.spacing(3),paddingTop:124,width:"calc(100% - 250px)"}}},{withTheme:!0})(ve)),be=n(163),Oe=n(534),_e=n(535),je=n(536),Ce=n(537),ke=n(549),we=n(538),Se=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={sortDirection:"desc",orderBy:"activeEvents"},n.changeSortDirection=function(e){"asc"===n.state.sortDirection?n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"desc"})):n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"asc"}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.rows.sort(function(t,n){return t[e.state.orderBy]<n[e.state.orderBy]?"asc"===e.state.sortDirection?-1:1:t[e.state.orderBy]>n[e.state.orderBy]?"asc"===e.state.sortDirection?1:-1:0});return r.a.createElement(a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Communities"),r.a.createElement(Oe.a,{size:"small"},r.a.createElement(_e.a,{className:n.scrollAdjust},r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"name"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("name")}},"Name")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"activeEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("activeEvents")}},"Active Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"unassignedEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("unassignedEvents")}},"Unassigned Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesOffline")}},"Devices Offline")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesBatteryLow"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesBatteryLow")}},"Battery Low")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"hubOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("hubOffline")}},"Hub Offline")))),r.a.createElement(we.a,{className:n.tableBody},i.map(function(t){return r.a.createElement(je.a,{key:t.id,className:n.scrollAdjust,hover:!0,onClick:function(){return e.props.setCommunity(t.id)}},r.a.createElement(Ce.a,{style:{overflow:"hidden"}},t.name),r.a.createElement(Ce.a,{align:"center"},t.activeEvents),r.a.createElement(Ce.a,{align:"center"},t.unassignedEvents),r.a.createElement(Ce.a,{align:"center"},t.devicesOffline),r.a.createElement(Ce.a,{align:"center"},t.devicesBatteryLow),r.a.createElement(Ce.a,{align:"center"},t.hubOffline))}))))}}]),t}(r.a.Component);var De=Object(c.b)(function(e){var t=e.app,n=t.communities,a=t.events;return{rows:n.map(function(e){return Object(m.a)({},e,{devicesOffline:a.filter(function(t){return"device_offline"===t.event_type&&t.community_id===e.id}).length,devicesBatteryLow:a.filter(function(t){return"battery_low"===t.event_type&&t.community_id===e.id}).length,hubOffline:a.filter(function(t){return"hub_offline"===t.event_type&&t.community_id===e.id}).length,activeEvents:a.filter(function(t){return t.community_id===e.id}).length,unassignedEvents:a.filter(function(t){return t.community_id===e.id}).filter(function(e){return"unassigned"===e.status}).length})})}},function(e){return{setCommunity:function(t){e({type:"set_community",id:t}),e({type:"get_units_request"}),x.getUnits(t).then(function(t){e({type:"get_units_success",json:t})},function(t){e({type:"get_units_failure",error:t})})}}})(Object(w.a)(function(e){return{tableBody:{display:"block",maxHeight:"490px",overflow:"auto"},scrollAdjust:{display:"table",width:"100%",tableLayout:"fixed",cursor:"pointer"}}})(Se)),xe=n(215),Te=n(42),Be=n(165),Ne=n(293),ze=n(89),Ae=n.n(ze),Le=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={selectedEventType:[],selectedCommunity:[],anchorEl1:null,anchorEl2:null},n.handleClick1=function(e){n.setState(Object(m.a)({},n.state,{anchorEl1:e.currentTarget}))},n.handleClick2=function(e){n.setState(Object(m.a)({},n.state,{anchorEl2:e.currentTarget}))},n.handleClose1=function(){n.setState(Object(m.a)({},n.state,{anchorEl1:null}))},n.handleClose2=function(){n.setState(Object(m.a)({},n.state,{anchorEl2:null}))},n.handleSelectEventType=function(e){-1===n.state.selectedEventType.indexOf(e)?n.setState(Object(m.a)({},n.state,{selectedEventType:[].concat(Object(Te.a)(n.state.selectedEventType),[e])})):n.setState(Object(m.a)({},n.state,{selectedEventType:Object(Te.a)(n.state.selectedEventType.filter(function(t){return t!==e}))}))},n.handleSelectCommunity=function(e){-1===n.state.selectedCommunity.indexOf(e)?n.setState(Object(m.a)({},n.state,{selectedCommunity:[].concat(Object(Te.a)(n.state.selectedCommunity),[e])})):n.setState(Object(m.a)({},n.state,{selectedCommunity:Object(Te.a)(n.state.selectedCommunity.filter(function(t){return t!==e}))}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.events,c=t.eventTypes,o=t.communities,l=this.state,s=l.anchorEl1,u=l.anchorEl2,d=0===this.state.selectedEventType.length?i:i.filter(function(t){return-1!==e.state.selectedEventType.indexOf(t.event_type)}),p=0===this.state.selectedCommunity.length?d:d.filter(function(t){return-1!==e.state.selectedCommunity.indexOf(t.community_id)}),f=[],h=!0,g=!1,y=void 0;try{for(var v,E=p[Symbol.iterator]();!(h=(v=E.next()).done);h=!0){var b=v.value.day;f[b]={day:b,value:f[b]?f[b].value+1:1}}}catch(_){g=!0,y=_}finally{try{h||null==E.return||E.return()}finally{if(g)throw y}}var O=Object.values(f);return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Notifications - overall"),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(F.a,{"aria-owns":s?"event-type-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick1,title:"Filter by type of event"},r.a.createElement(Ae.a,null)),r.a.createElement(Ne.a,{id:"event-type-menu",anchorEl:s,open:Boolean(s),onClose:this.handleClose1},r.a.createElement(le.a,{onClick:function(){return e.setState(Object(m.a)({},e.state,{selectedEventType:[]}))},style:0===this.state.selectedEventType.length?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},"None"),Array.from(c).map(function(t){return r.a.createElement(le.a,{key:t,onClick:function(){return e.handleSelectEventType(t)},style:-1!==e.state.selectedEventType.indexOf(t)?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},t)})),r.a.createElement(F.a,{"aria-owns":u?"simple-menu":void 0,"aria-haspopup":"true",title:"Filter by communities",onClick:this.handleClick2},r.a.createElement(Ae.a,null)),r.a.createElement(Ne.a,{id:"simple-menu",anchorEl:u,open:Boolean(u),onClose:this.handleClose2},r.a.createElement(le.a,{onClick:function(){return e.setState(Object(m.a)({},e.state,{selectedCommunity:[]}))},style:0===this.state.selectedCommunity.length?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},"None"),o.map(function(t){return r.a.createElement(le.a,{key:t.id,onClick:function(){return e.handleSelectCommunity(t.id)},style:-1!==e.state.selectedCommunity.indexOf(t.id)?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},t.name)})))),r.a.createElement("div",{className:n.calendar},r.a.createElement(Be.a,{data:O,align:"top-left",from:"2018-01-01",to:"2019-12-31",emptyColor:"#eeeeee",colors:["#97e3d5","#61cdbb","#e8c1a0","#f47560"],margin:{top:20,right:40,bottom:40,left:40},yearSpacing:40,monthBorderColor:"#000000",dayBorderWidth:1,dayBorderColor:"#000000",legends:[{anchor:"bottom-left",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"left-to-right"}]})))}}]),t}(r.a.Component);var Pe=Object(c.b)(function(e){var t=e.app,n=t.events,a=t.communities,r=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")};return{events:n.map(function(e){return{day:r(e.time_created),event_type:e.event_type,community_id:e.community_id}}),eventTypes:new Set(Object(Te.a)(n.map(function(e){return e.event_type}))),communities:a}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{calendar:{height:"235px"}}})(Le)),Fe=n(166),Ie=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={selectedCommunity:"",anchorEl:null},n.handleClick=function(e){n.setState(Object(m.a)({},n.state,{anchorEl:e.currentTarget}))},n.handleClose=function(){n.setState(Object(m.a)({},n.state,{anchorEl:null}))},n.handleSelectEventType=function(e){-1===n.state.selectedCommunity.indexOf(e)?n.setState(Object(m.a)({},n.state,{selectedCommunity:[].concat(Object(Te.a)(n.state.selectedCommunity),[e])})):n.setState(Object(m.a)({},n.state,{selectedCommunity:Object(Te.a)(n.state.selectedCommunity.filter(function(t){return t!==e}))}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.events,c=t.communities,o=t.eventTypes,l=this.state.anchorEl,s=0===this.state.selectedCommunity.length?i:i.filter(function(t){return-1!==e.state.selectedCommunity.indexOf(t.community_id)}),u=[];s.map(function(e){var t;u[e.day]=Object(m.a)({},u[e.day]?u[e.day]:{day:e.day},(t={},Object(O.a)(t,e.event_type,u[e.day]&&u[e.day][e.event_type]?u[e.day][e.event_type]+1:1),Object(O.a)(t,"".concat(e.event_type,"Color"),"#".concat(crypto.getRandomValues(new Uint32Array(1))[0].toString(16).padStart(8,0))),t))});var d=Object.values(u).sort(function(e,t){return e.day<t.day?-1:e.day>t.day?1:0});return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Notifications - week"),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(F.a,{"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true",title:"Filter by communities",onClick:this.handleClick},r.a.createElement(Ae.a,null)),r.a.createElement(Ne.a,{id:"simple-menu",anchorEl:l,open:Boolean(l),onClose:this.handleClose},r.a.createElement(le.a,{onClick:function(){return e.setState(Object(m.a)({},e.state,{selectedCommunity:[]}))},style:0===this.state.selectedCommunity.length?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},"None"),c.map(function(t){return r.a.createElement(le.a,{key:t.id,onClick:function(){return e.handleSelectEventType(t.id)},style:-1!==e.state.selectedCommunity.indexOf(t.id)?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},t.name)})))),r.a.createElement("div",{className:n.calendar},r.a.createElement(Fe.a,{data:d,keys:Array.from(o),indexBy:"day",margin:{top:5,right:150,bottom:40,left:60},padding:.3,groupMode:"stacked",layout:"horizontal",colors:{scheme:"nivo"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"no. of events",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"day",legendPosition:"middle",legendOffset:-50},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"top-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15})))}}]),t}(r.a.Component);var Re=Object(c.b)(function(e){var t=e.app,n=t.events,a=t.communities,r=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[n,a].join("-")};return{events:n.filter(function(e){return Date.parse(e.time_created)/1e3>(new Date).getTime()/1e3-604800}).map(function(e){return{day:r(e.time_created),event_type:e.event_type,community_id:e.community_id}}),communities:a,eventTypes:new Set(Object(Te.a)(n.map(function(e){return e.event_type})))}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{calendar:{height:"225px"}}})(Ie)),We=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(a.Fragment,null,r.a.createElement(D.a,{container:!0,className:e.root},r.a.createElement(D.a,{item:!0,className:e.communityStatus},r.a.createElement(xe.a,null,r.a.createElement(De,null))),r.a.createElement(D.a,{item:!0,className:e.calendarGraph},r.a.createElement(xe.a,null,r.a.createElement(Pe,null)),r.a.createElement(xe.a,{style:{marginTop:20}},r.a.createElement(Re,null)))))}}]),t}(r.a.Component);var Ue=Object(c.b)(function(e){return Object(be.a)(e.app),{}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{root:{},communityStatus:Object(O.a)({width:"49%",marginRight:"1%"},e.breakpoints.down("md"),{width:"100%",margin:0}),calendarGraph:Object(O.a)({width:"49%",marginLeft:"1%"},e.breakpoints.down("md"),{width:"100%",marginTop:20,margin:0})}})(We)),Ze=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={sortDirection:"desc",orderBy:"activeEvents"},n.changeSortDirection=function(e){"asc"===n.state.sortDirection?n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"desc"})):n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"asc"}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.rows.sort(function(t,n){return t[e.state.orderBy]<n[e.state.orderBy]?"asc"===e.state.sortDirection?-1:1:t[e.state.orderBy]>n[e.state.orderBy]?"asc"===e.state.sortDirection?1:-1:0});return r.a.createElement(a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Units"),r.a.createElement(Oe.a,{size:"small"},r.a.createElement(_e.a,{className:n.scrollAdjust},r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"name"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("name")}},"Name")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"activeEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("activeEvents")}},"Active Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"unassignedEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("unassignedEvents")}},"Unassigned Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesOffline")}},"Devices Offline")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesBatteryLow"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesBatteryLow")}},"Battery Low")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"hubOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("hubOffline")}},"Hub Offline")))),r.a.createElement(we.a,{className:n.tableBody},i.map(function(t){return r.a.createElement(je.a,{key:t.id,className:n.scrollAdjust,hover:!0,onClick:function(){return e.props.setUnit(t.id)}},r.a.createElement(Ce.a,{style:{borderLeft:t.color}},t.name),r.a.createElement(Ce.a,{align:"center"},t.activeEvents),r.a.createElement(Ce.a,{align:"center"},t.unassignedEvents),r.a.createElement(Ce.a,{align:"center"},t.devicesOffline),r.a.createElement(Ce.a,{align:"center"},t.devicesBatteryLow),r.a.createElement(Ce.a,{align:"center"},t.hubOffline))}))))}}]),t}(r.a.Component);var Ge=Object(c.b)(function(e){var t=e.app,n=t.units,a=t.events,r=t.selectedCommunity;return{rows:n.filter(function(e){return e.community_id===r}).map(function(e){return Object(m.a)({},e,{devicesOffline:a.filter(function(t){return"device_offline"===t.event_type&&t.unit_id===e.id}).length,devicesBatteryLow:a.filter(function(t){return"battery_low"===t.event_type&&t.unit_id===e.id}).length,hubOffline:a.filter(function(t){return"hub_offline"===t.event_type&&t.unit_id===e.id}).length,activeEvents:a.filter(function(t){return t.unit_id===e.id}).length,unassignedEvents:a.filter(function(t){return t.unit_id===e.id}).filter(function(e){return"unassigned"===e.status}).length,color:a.filter(function(t){return t.unit_id===e.id}).length>0?e.is_notifications_paused?"5px solid orange":"5px solid #ff00009c":"5px solid #00800085"})})}},function(e){return{setUnit:function(t){e({type:"set_unit",id:t}),e({type:"get_devices_request"}),x.getDevices(t).then(function(t){e({type:"get_devices_success",json:t})},function(t){e({type:"get_devices_failure",error:t})}),e({type:"get_zones_request"}),x.getZones(t).then(function(t){e({type:"get_zones_success",json:t})},function(t){e({type:"get_zones_failure",error:t})}),e({type:"get_graph_events_request"}),x.getGraphEvents(t).then(function(t){e({type:"get_graph_events_success",json:t})},function(t){e({type:"get_graph_events_failure",error:t})})}}})(Object(w.a)(function(e){return{tableBody:{display:"block",maxHeight:"490px",overflow:"auto"},scrollAdjust:{display:"table",width:"100%",tableLayout:"fixed",cursor:"pointer"}}})(Ze)),He=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={selectedEventType:[],anchorEl1:null},n.handleClick1=function(e){n.setState(Object(m.a)({},n.state,{anchorEl1:e.currentTarget}))},n.handleClose1=function(){n.setState(Object(m.a)({},n.state,{anchorEl1:null}))},n.handleSelectEventType=function(e){-1===n.state.selectedEventType.indexOf(e)?n.setState(Object(m.a)({},n.state,{selectedEventType:[].concat(Object(Te.a)(n.state.selectedEventType),[e])})):n.setState(Object(m.a)({},n.state,{selectedEventType:Object(Te.a)(n.state.selectedEventType.filter(function(t){return t!==e}))}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.events,c=t.eventTypes,o=this.state.anchorEl1,l=0===this.state.selectedEventType.length?i:i.filter(function(t){return-1!==e.state.selectedEventType.indexOf(t.event_type)}),s=[],u=!0,d=!1,p=void 0;try{for(var f,h=l[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var g=f.value.day;s[g]={day:g,value:s[g]?s[g].value+1:1}}}catch(v){d=!0,p=v}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var y=Object.values(s);return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Notifications - overall"),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(F.a,{"aria-owns":o?"event-type-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick1,title:"Filter by type of event"},r.a.createElement(Ae.a,null)),r.a.createElement(Ne.a,{id:"event-type-menu",anchorEl:o,open:Boolean(o),onClose:this.handleClose1},r.a.createElement(le.a,{onClick:function(){return e.setState(Object(m.a)({},e.state,{selectedEventType:[]}))},style:0===this.state.selectedEventType.length?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},"None"),Array.from(c).map(function(t){return r.a.createElement(le.a,{key:t,onClick:function(){return e.handleSelectEventType(t)},style:-1!==e.state.selectedEventType.indexOf(t)?{backgroundColor:"#1ADCFF",color:"#ffffff"}:{}},t)})))),r.a.createElement("div",{className:n.calendar},r.a.createElement(Be.a,{data:y,align:"top-left",from:"2018-01-01",to:"2019-12-31",emptyColor:"#eeeeee",colors:["#97e3d5","#61cdbb","#e8c1a0","#f47560"],margin:{top:20,right:40,bottom:40,left:40},yearSpacing:40,monthBorderColor:"#000000",dayBorderWidth:1,dayBorderColor:"#000000",legends:[{anchor:"bottom-left",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"left-to-right"}]})))}}]),t}(r.a.Component);var Je=Object(c.b)(function(e){var t=e.app,n=t.events,a=t.communities,r=t.selectedCommunity,i=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")};return{events:n.filter(function(e){return e.community_id===r}).map(function(e){return{day:i(e.time_created),event_type:e.event_type}}),eventTypes:new Set(Object(Te.a)(n.map(function(e){return e.event_type}))),communities:a}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{calendar:{height:"235px"}}})(He)),qe=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.events,i=e.eventTypes,c=[];n.map(function(e){var t;c[e.day]=Object(m.a)({},c[e.day]?c[e.day]:{day:e.day},(t={},Object(O.a)(t,e.event_type,c[e.day]&&c[e.day][e.event_type]?c[e.day][e.event_type]+1:1),Object(O.a)(t,"".concat(e.event_type,"Color"),"#".concat(crypto.getRandomValues(new Uint32Array(1))[0].toString(16).padStart(8,0))),t))});var o=Object.values(c).sort(function(e,t){return e.day<t.day?-1:e.day>t.day?1:0});return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Notifications - week")),0===n.length?r.a.createElement("div",{className:t.noEvents},"No active events this week"):r.a.createElement("div",{className:t.calendar},r.a.createElement(Fe.a,{data:o,keys:Array.from(i),indexBy:"day",margin:{top:5,right:150,bottom:40,left:60},padding:.3,groupMode:"stacked",layout:"horizontal",colors:{scheme:"nivo"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"no. of events",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"day",legendPosition:"middle",legendOffset:-50},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"top-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15})))}}]),t}(r.a.Component);var Me=Object(c.b)(function(e){var t=e.app,n=t.events,a=t.communities,r=t.selectedCommunity,i=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[n,a].join("-")};return{events:n.filter(function(e){return Date.parse(e.time_created)/1e3>(new Date).getTime()/1e3-604800}).filter(function(e){return e.community_id===r}).map(function(e){return{day:i(e.time_created),event_type:e.event_type,community_id:e.community_id}}),communities:a,eventTypes:new Set(Object(Te.a)(n.map(function(e){return e.event_type})))}},function(e){return{}})(Object(w.a)(function(e){return{calendar:{height:"240px"},noEvents:{height:"240px",textAlign:"center",paddingTop:"105px"}}})(qe)),Xe=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(a.Fragment,null,r.a.createElement(D.a,{container:!0,className:e.root},r.a.createElement(D.a,{item:!0,className:e.unitList},r.a.createElement(xe.a,null,r.a.createElement(Ge,null))),r.a.createElement(D.a,{item:!0,className:e.graph},r.a.createElement(xe.a,null,r.a.createElement(Je,null)),r.a.createElement(xe.a,{style:{marginTop:20}},r.a.createElement(Me,null)))))}}]),t}(r.a.Component);var Ye=Object(c.b)(function(e){return Object(be.a)(e.app),{}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{root:{},unitList:Object(O.a)({width:"49%",marginRight:"1%"},e.breakpoints.down("md"),{width:"100%",margin:0}),graph:Object(O.a)({width:"49%",marginLeft:"1%"},e.breakpoints.down("md"),{width:"100%",marginTop:20,margin:0})}})(Xe)),Ve=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={sortDirection:"desc",orderBy:"activeEvents"},n.changeSortDirection=function(e){"asc"===n.state.sortDirection?n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"desc"})):n.setState(Object(m.a)({},n.state,{orderBy:e,sortDirection:"asc"}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.rows,c=t.selectedZone,o=i.sort(function(t,n){return t[e.state.orderBy]<n[e.state.orderBy]?"asc"===e.state.sortDirection?-1:1:t[e.state.orderBy]>n[e.state.orderBy]?"asc"===e.state.sortDirection?1:-1:0});return r.a.createElement(a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Zones"),r.a.createElement(Oe.a,{size:"small"},r.a.createElement(_e.a,{className:n.scrollAdjust},r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"name"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("name")}},"Name")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"totalDevices"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("totalDevices")}},"Total Devices")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"activeEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("activeEvents")}},"Active Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"unassignedEvents"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("unassignedEvents")}},"Unassigned Events")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesOffline")}},"Devices Offline")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"devicesBatteryLow"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("devicesBatteryLow")}},"Battery Low")),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{active:"hubOffline"===this.state.orderBy,direction:this.state.sortDirection,onClick:function(){return e.changeSortDirection("hubOffline")}},"Hub Offline")))),r.a.createElement(we.a,{className:n.tableBody},o.map(function(t){return r.a.createElement(je.a,{key:t.id,style:c===t.id?{backgroundColor:"#1ADCFF",color:"white"}:{},className:n.scrollAdjust,hover:!0,onClick:function(){return e.props.selectedZone!==t.id&&e.props.setZone(t.id)}},r.a.createElement(Ce.a,{style:{borderLeft:t.color,color:"inherit"}},t.name),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.totalDevices),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.activeEvents),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.unassignedEvents),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.devicesOffline),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.devicesBatteryLow),r.a.createElement(Ce.a,{align:"center",style:{color:"inherit"}},t.hubOffline))}))))}}]),t}(r.a.Component);var $e=Object(c.b)(function(e){var t=e.app,n=t.zones,a=t.devices,r=t.events,i=t.selectedZone,c=n.map(function(e){return{id:e.id,name:e.name,totalDevices:a.filter(function(t){return t.zone_id===e.id}).length,activeEvents:r.filter(function(t){return t.zone_id===e.id}).length,devicesOffline:r.filter(function(t){return t.zone_id===e.id&&"device_offline"===t.event_type}).length,devicesBatteryLow:r.filter(function(t){return t.zone_id===e.id&&"battery_low"===t.event_type}).length,hubOffline:r.filter(function(t){return t.zone_id===e.id&&"hub_offline"===t.event_type}).length,color:r.filter(function(t){return t.zone_id===e.id}).length>0?"5px solid #ff00009c":"5px solid #00800085",unassignedEvents:r.filter(function(t){return t.zone_id===e.id&&"unassigned"===t.status}).length}});return{zones:n,rows:c,selectedZone:i}},function(e){return{setZone:function(t){e({type:"set_zone",id:t})}}})(Object(w.a)(function(e){return{tableBody:{display:"block",maxHeight:"490px",overflow:"auto"},scrollAdjust:{display:"table",width:"100%",tableLayout:"fixed",cursor:"pointer"}}})(Ve)),Ke=n(541),Qe=n(539),et=n(168),tt=n.n(et),nt=n(124),at=n.n(nt),rt=Object(w.a)(function(e){return{badge:{right:"50%"}}})(Qe.a),it=Object(w.a)(function(e){return{badge:{top:"50%",right:"75%",color:"red"}}})(Qe.a),ct=Object(w.a)(function(e){return{badge:{top:"50%",right:"25%"}}})(Qe.a),ot=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).componentWillReceiveProps=function(e){e.devices.length>0&&e.selectedZone!==n.props.selectedZone?n.props.setDevice(e.devices[0].id):e.devices.length>0&&0===n.props.devices.length&&n.props.setDevice(e.devices[0].id)},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,i=t.devices,c=t.zoneName,o=t.selectedDevice,l=t.device;return r.a.createElement(a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},c),r.a.createElement("div",{className:n.deviceList},i.map(function(t){switch(t.device_type){case"bulb":return r.a.createElement("div",{key:t.id,className:n.deviceDiv,onClick:function(){return e.props.setDevice(t.id)}},r.a.createElement(ct,{invisible:t.is_connected,badgeContent:r.a.createElement(at.a,null)},r.a.createElement(rt,{className:n.margin,variant:"dot",invisible:t.id!==o,color:"primary"},r.a.createElement("img",{key:t.id,className:n.device,src:"bulb_hover.png"}))));case"sensor":return"motion"===t.sensor_type?r.a.createElement("div",{key:t.id,className:n.deviceDiv,onClick:function(){return e.props.setDevice(t.id)}},r.a.createElement(ct,{invisible:t.is_connected,badgeContent:r.a.createElement(at.a,null)},r.a.createElement(it,{invisible:t.battery_voltage>t.battery_voltage_threshold,badgeContent:r.a.createElement(tt.a,null)},r.a.createElement(rt,{className:n.margin,variant:"dot",invisible:t.id!==o,color:"primary"},r.a.createElement("img",{key:t.id,className:n.device,src:"sensor_hover.png"}))))):r.a.createElement("div",{key:t.id,className:n.deviceDiv,onClick:function(){return e.props.setDevice(t.id)}},r.a.createElement(ct,{invisible:t.is_connected,badgeContent:r.a.createElement(at.a,null)},r.a.createElement(it,{invisible:t.battery_voltage>t.battery_voltage_threshold,badgeContent:r.a.createElement(tt.a,null)},r.a.createElement(rt,{className:n.margin,variant:"dot",invisible:t.id!==o,color:"primary"},r.a.createElement("img",{key:t.id,className:n.device,src:"contact.png"})))));case"switch":return r.a.createElement("div",{key:t.id,className:n.deviceDiv,onClick:function(){return e.props.setDevice(t.id)}},r.a.createElement(ct,{invisible:t.is_connected,badgeContent:r.a.createElement(at.a,null)},r.a.createElement(it,{invisible:t.battery_voltage>t.battery_voltage_threshold,badgeContent:r.a.createElement(tt.a,null)},r.a.createElement(rt,{className:n.margin,variant:"dot",invisible:t.id!==o,color:"primary"},r.a.createElement("img",{key:t.id,className:n.device,src:"switch_hover.png"})))));case"outlet":return r.a.createElement("div",{key:t.id,className:n.deviceDiv,onClick:function(){return e.props.setDevice(t.id)}},r.a.createElement(ct,{invisible:t.is_connected,badgeContent:r.a.createElement(at.a,null)},r.a.createElement(rt,{className:n.margin,variant:"dot",invisible:t.id!==o,color:"primary"},r.a.createElement("img",{key:t.id,className:n.device,src:"outlet.png"}))))}})),r.a.createElement(Oe.a,{size:"small"},r.a.createElement(_e.a,{className:n.scrollAdjust},r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"Property"),r.a.createElement(Ce.a,null,"Value"))),null!==l&&r.a.createElement(we.a,null,r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"device type"),r.a.createElement(Ce.a,null,l.device_type.toString())),l.sensor_type&&r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"sensor type"),r.a.createElement(Ce.a,null,l.sensor_type.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"manufacturer"),r.a.createElement(Ce.a,null,l.manufacturer.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"model"),r.a.createElement(Ce.a,null,l.model.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"mac address"),r.a.createElement(Ce.a,null,l.mac_address.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"network address"),r.a.createElement(Ce.a,null,l.network_address.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"firmware vs"),r.a.createElement(Ce.a,null,l.firmware_vs.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"hardware vs"),r.a.createElement(Ce.a,null,l.hw_vs.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"is connected"),r.a.createElement(Ce.a,null,l.is_connected.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"endpoints"),r.a.createElement(Ce.a,null,l.endpoints.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"last contact time"),r.a.createElement(Ce.a,null,l.last_contact_time.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"last joined at"),r.a.createElement(Ce.a,null,l.last_joined_at.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"created at"),r.a.createElement(Ce.a,null,l.created_at.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"id"),r.a.createElement(Ce.a,null,l.id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"hub id"),r.a.createElement(Ce.a,null,l.hub_id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"zone id"),r.a.createElement(Ce.a,null,l.zone_id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"site id"),r.a.createElement(Ce.a,null,l.site_id.toString())),null!==l&&Object.keys(l).map(function(e){if(null!==l[e]&&-1===["device_type","sensor_type","manufacturer","model","mac_address","network_address","firmware_vs","hw_vs","is_connected","endpoints","last_contact_time","last_joined_time","created_at","id","hub_id","zone_id","site_id"].indexOf(e))return r.a.createElement(je.a,{key:e},r.a.createElement(Ce.a,null,e),r.a.createElement(Ce.a,null,l[e].toString()))}))))}}]),t}(r.a.Component);var lt=Object(c.b)(function(e){var t=e.app,n=t.devices,a=t.selectedZone,r=t.zones,i=t.selectedDevice;return{selectedZone:a,selectedDevice:i,devices:n.filter(function(e){return e.zone_id===a}),zoneName:r.filter(function(e){return e.id===a})[0]?r.filter(function(e){return e.id===a})[0].name:"",device:n.filter(function(e){return e.id===i})[0]?n.filter(function(e){return e.id===i})[0]:null}},function(e){return{setDevice:function(t){e({type:"set_device",id:t})}}})(Object(w.a)(function(e){return{deviceList:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,flexWrap:"wrap"},device:{margin:10,width:20,height:30},deviceDiv:{opacity:.75,cursor:"pointer","&:hover":{opacity:1}}}})(ot)),st=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.device;return r.a.createElement(a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",style:{marginLeft:"16px"}},"Device Details"),r.a.createElement(Oe.a,{size:"small"},r.a.createElement(_e.a,{className:t.scrollAdjust},r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"Property"),r.a.createElement(Ce.a,null,"Value"))),r.a.createElement(we.a,null,r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"device type"),r.a.createElement(Ce.a,null,n.device_type.toString())),n.sensor_type&&r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"sensor type"),r.a.createElement(Ce.a,null,n.sensor_type.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"manufacturer"),r.a.createElement(Ce.a,null,n.manufacturer.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"model"),r.a.createElement(Ce.a,null,n.model.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"mac address"),r.a.createElement(Ce.a,null,n.mac_address.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"network address"),r.a.createElement(Ce.a,null,n.network_address.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"firmware vs"),r.a.createElement(Ce.a,null,n.firmware_vs.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"hardware vs"),r.a.createElement(Ce.a,null,n.hw_vs.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"is connected"),r.a.createElement(Ce.a,null,n.is_connected.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"endpoints"),r.a.createElement(Ce.a,null,n.endpoints.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"last contact time"),r.a.createElement(Ce.a,null,n.last_contact_time.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"last joined time"),r.a.createElement(Ce.a,null,n.last_joined_time.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"created at"),r.a.createElement(Ce.a,null,n.created_at.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"id"),r.a.createElement(Ce.a,null,n.id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"hub id"),r.a.createElement(Ce.a,null,n.hub_id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"zone id"),r.a.createElement(Ce.a,null,n.zone_id.toString())),r.a.createElement(je.a,null,r.a.createElement(Ce.a,null,"site id"),r.a.createElement(Ce.a,null,n.site_id.toString())))))}}]),t}(r.a.Component);Object(c.b)(function(e){var t=e.app,n=t.devices,a=t.selectedDevice;return{device:n.filter(function(e){return e.id===a})[0]?n.filter(function(e){return e.id===a})[0]:null}},function(e){return{setDevice:function(t){e({type:"set_device",id:t})}}})(Object(w.a)(function(e){return{deviceDetails:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap"}}})(st)),n(453);var ut=n(289),mt=n.n(ut),dt=(n(460),function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this._renderChart(this.props.graphEvents)}},{key:"componentDidUpdate",value:function(e){e.graphEvents.motion_events!==this.props.graphEvents.motion_events&&0!==this.props.graphEvents.motion_events.length&&this._renderChart(this.props.graphEvents)}},{key:"_renderChart",value:function(e){var t=e.motion_events?e.motion_events.map(function(e){return{zone:e.zone_type,x:new Date(e.report_time),y:e.is_motion_detected}}):[];Array.from(new Set(t.map(function(e){return e.zone}))).map(function(e,n){var a=e.replace(/ /g,"");mt.a.generate({size:{height:85},data:{color:function(e,t){return"#179fec"},x:"x",columns:[["x"].concat(Object(Te.a)(t.filter(function(t){return t.zone===e}).map(function(e){return e.x}))),["motion"].concat(Object(Te.a)(t.filter(function(t){return t.zone===e}).map(function(e){return e.y})))],type:"area-step",xFormat:"yyyy-MM-dd'T'HH:mm:ssZ"},line:{step:{type:"step-after"}},zoom:{enabled:!0},axis:{x:{type:"timeseries",show:!0,tick:{format:"%m/%d %H:%M",fit:!1,culling:{max:5}},extent:[new Date(Date.now()-864e5),new Date(Date.now())]},y:{show:!1}},legend:{show:!1},tooltip:{show:!0},bindto:"#"+a})})}},{key:"render",value:function(){var e=this.props,t=(e.classes,e.graphEvents),n=t.motion_events?t.motion_events.map(function(e){return{zone:e.zone_type,x:new Date(e.report_time),y:e.is_motion_detected}}):[];return r.a.createElement(a.Fragment,null,n===[]?r.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"}},"No events to show"):Array.from(new Set(n.map(function(e){return e.zone}))).map(function(e,t){return r.a.createElement(xe.a,{key:e.replace(/ /g,""),style:{padding:"5px",marginBottom:"1%",overflow:"hidden",width:"100%"}},r.a.createElement("div",{key:e.replace(/ /g,"")},r.a.createElement("div",{style:{paddingLeft:"10px"}},e),r.a.createElement("div",{id:e.replace(/ /g,"")})))}))}}]),t}(r.a.Component));var pt=Object(c.b)(function(e){return{graphEvents:e.app.graphEvents}},function(e){return{}})(Object(w.a)(function(e){return{activityGraph:{}}})(dt)),ft=n(543),ht=n(540),gt=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},n.handleChange=function(e,t){n.setState({value:t})},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.fetchingGraphEvents;return r.a.createElement(a.Fragment,null,r.a.createElement(D.a,{container:!0,className:t.root},r.a.createElement(N.a,{position:"static",style:{backgroundColor:"white",color:"black",marginBottom:"10px",zIndex:10}},r.a.createElement(ft.a,{variant:"fullWidth",value:this.state.value,onChange:this.handleChange,classes:{indicator:t.tabsIndicator}},r.a.createElement(ht.a,{label:"Sensor Data",classes:{selected:t.selected}}),r.a.createElement(ht.a,{label:"Event Data",disabled:!0,classes:{selected:t.selected}}),r.a.createElement(ht.a,{label:"Config Data",classes:{selected:t.selected}}))),0===this.state.value&&(n?r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement(xe.a,{style:{height:"105px",marginTop:"1%",width:"100%",padding:"5px"}},r.a.createElement(Ke.a,{style:{height:"100%"},color:"secondary"})),r.a.createElement(xe.a,{style:{height:"105px",marginTop:"1%",width:"100%",padding:"5px"}},r.a.createElement(Ke.a,{style:{height:"100%"},color:"secondary"})),r.a.createElement(xe.a,{style:{height:"105px",marginTop:"1%",width:"100%",padding:"5px"}},r.a.createElement(Ke.a,{style:{height:"100%"},color:"secondary"})),r.a.createElement(xe.a,{style:{height:"105px",marginTop:"1%",width:"100%",padding:"5px"}},r.a.createElement(Ke.a,{style:{height:"100%"},color:"secondary"}))):r.a.createElement(pt,null)),1===this.state.value&&r.a.createElement("div",null),2===this.state.value&&r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(D.a,{item:!0,className:t.unitList},r.a.createElement(xe.a,null,r.a.createElement($e,null))),r.a.createElement(D.a,{item:!0,className:t.graph},r.a.createElement(xe.a,null,r.a.createElement(lt,null))))))}}]),t}(r.a.Component);var yt=Object(c.b)(function(e){return{fetchingGraphEvents:e.app.fetchingGraphEvents}},function(e){return{dataRefresh:function(){}}})(Object(w.a)(function(e){return{root:{},activityGraph:{width:"100%"},unitList:Object(O.a)({width:"49%",marginRight:"1%"},e.breakpoints.down("md"),{width:"100%",margin:0}),graph:Object(O.a)({width:"49%",marginLeft:"1%"},e.breakpoints.down("md"),{width:"100%",marginTop:20,margin:0}),tabsIndicator:{backgroundColor:"#179fec"},selected:{color:"#179fec",fontWeight:600,fontSize:14}}})(gt)),vt=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).hidden=null,n.visibilityChange=null,n.triedRefreshing=!1,n.refreshTimeOut=null,n.dataRefreshTimeOut=null,n.componentDidMount=function(){n.props.init(),n.refreshTimeOut=setTimeout(n.refresh,3e6),n.dataRefreshTimeOut=setTimeout(n.dataRefresh,6e4),window.addEventListener("online",n.onLineCheckAndRefresh),window.addEventListener("storage",function(e){return n.storageChange(e)},!1),"undefined"!==typeof document.hidden?(n.hidden="hidden",n.visibilityChange="visibilitychange"):"undefined"!==typeof document.msHidden?(n.hidden="msHidden",n.visibilityChange="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),"undefined"===typeof document.addEventListener||void 0===n.hidden?console.log("Some features may not work on this browser. Please refresh page if app breaks!"):document.addEventListener(n.visibilityChange,n.visibilityCheckAndRefresh,!1)},n.visibilityCheckAndRefresh=function(){!1===document[n.hidden]&&n.triedRefreshing&&(n.props.refresh(),n.triedRefreshing=!1)},n.onLineCheckAndRefresh=function(){!1===document[n.hidden]?(n.props.refresh(),n.triedRefreshing=!1):n.triedRefreshing=!0},n.storageChange=function(e){"user"===e.key&&document[n.hidden]&&(null===JSON.parse(localStorage.getItem("user"))&&n.props.softLogout(),JSON.parse(localStorage.getItem("user"))&&n.props.user.user_id!==JSON.parse(localStorage.getItem("user")).user_id&&n.props.softLogout())},n.refresh=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];document[n.hidden]?n.triedRefreshing=!0:n.props.refresh(),e&&(n.refreshTimeOut=setTimeout(n.refresh,3e6))},n.dataRefresh=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!document[n.hidden]&&navigator.onLine&&n.props.dataRefresh(),e&&(n.dataRefreshTimeOut=setTimeout(n.dataRefresh,6e4))},n.componentWillUnmount=function(){clearTimeout(n.refreshTimeOut),clearTimeout(n.dataRefreshTimeOut)},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.currentPage;return r.a.createElement(Ee,null,"Dashboard"===e&&r.a.createElement(Ue,null)||"Community"===e&&r.a.createElement(Ye,null)||"Unit"===e&&r.a.createElement(yt,null))}}]),t}(r.a.Component);var Et=Object(c.b)(function(e){return{currentPage:e.app.currentPage}},function(e){return{init:function(){var t={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:null===localStorage.getItem("user")?null:JSON.parse(localStorage.getItem("user")).refresh_token,client_id:"rTZ61c51XXJriPBSoGReIeZ7W7MjWy"})};fetch("https://care-api-prod.appspot.com/oauth2/tokens",t).then(function(t){return t.json().then(function(n){t.ok?(localStorage.setItem("user",JSON.stringify(n)),e({type:"refreshed",data:n}),e({type:"get_active_events_request"}),x.getActiveEvents().then(function(t){e({type:"get_active_events_success",json:t})},function(t){e({type:"get_activeEvents_failure"})}),e({type:"get_communities_request"}),x.getCommunities().then(function(t){e({type:"get_communities_success",json:t})},function(t){e({type:"get_communities_failure",error:t})})):(localStorage.removeItem("user"),e({type:"logout"}))})})},refresh:function(){var t={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:null===localStorage.getItem("user")?null:JSON.parse(localStorage.getItem("user")).refresh_token,client_id:"rTZ61c51XXJriPBSoGReIeZ7W7MjWy"})};fetch("https://care-api-prod.appspot.com/oauth2/tokens",t).then(function(t){return t.json().then(function(n){t.ok?(localStorage.setItem("user",JSON.stringify(n)),e({type:"REFRESHED",data:n})):(localStorage.removeItem("user"),e({type:"logout"}))})})},softLogout:function(){e({type:"logout"})},dataRefresh:function(){e({type:"get_active_events_request"}),x.getActiveEvents().then(function(t){e({type:"get_active_events_success",json:t})},function(t){e({type:"get_activeEvents_failure"})})}}})(vt),bt=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,message:""},n.handleClose=function(e,t){"clickaway"!==t&&(n.props.clearAlert(),n.setState({open:!1,message:""}))},n.componentWillReceiveProps=function(e){e.message!==n.props.message&&(n.state.open?(n.setState({open:!1}),n.setState({open:!0,message:e.message})):n.setState({open:!0,message:e.message}))},n}return Object(b.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"h-100"},this.props.loggedIn?r.a.createElement(Et,null):r.a.createElement(L,null),r.a.createElement(P.a,{key:Date.now(),anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:3e3,onClose:this.handleClose,disableWindowBlurListener:!0,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.message),action:[r.a.createElement(F.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.a.createElement(R.a,null))]}))}}]),t}(r.a.Component);var Ot=Object(c.b)(function(e){var t=e.app;return{loggedIn:t.loggedIn,message:t.message}},function(e){return{clearAlert:function(){e({type:"clear_alert"})}}})(bt),_t=(n(461),Object(o.a)({palette:{primary:{main:"#1ADCFF",dark:"#179FEC",contrastText:"#ffffff"},secondary:{main:"#ccc"},overrides:{MuiSelect:{select:{"&:focus":{background:"transparent"}}}}}}));Object(i.render)(r.a.createElement(l.a,{theme:_t},r.a.createElement(c.a,{store:h},r.a.createElement(Ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[305,1,2]]]);
//# sourceMappingURL=main.6e5f03d4.chunk.js.map